<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />

    <title>Panel de control Temubank</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />

    <!-- Custom styles for this template -->
    <link href="#" th:href="@{/css/style.css}" rel="stylesheet" />

    <link href="#" th:href="@{/css/contacts.css}" rel="stylesheet" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>

</head>

<body>

    <div class="container-fluid">
        <div class="row">
            <nav class="navbar navbar-inverse">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">Bienvenido [[${cliente.nombre}]] a TemuBank</a>
                    </div>

                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#" th:href="@{/login?logout}"><span class="glyphicon glyphicon-log-in"></span>
                                LogOut</a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="row">
            <div class="col-md-12">
                <h1>Transferencias</h1>
            </div>
        </div>
        <br />
        <div class="row">
                <div class="col-md-12">
                    <div class="col-md-2">
                        <a class="btn btn-md btn-primary btn-block" th:href="@{/cliente/{id}(id=${cliente.id})}">
                            <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                            Informacio
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a class="btn btn-md btn-primary btn-block" th:href="@{/cliente/transferencia/{id}(id=${cliente.id})}">
                            <span class="glyphicon glyphicon-usd" aria-hidden="true"></span>
                            Tranferencias
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a class="btn btn-md btn-primary btn-block" th:href="@{/cliente/pagos/{id}(id=${cliente.id})}">
                            <span class="glyphicon glyphicon-credit-card" aria-hidden="true"></span>
                            Pagos
                        </a>
                    </div>
                    <div class="col-md-2">
                        <a class="btn btn-md btn-primary btn-block" th:href="@{/cliente/transacciones/{id}(id=${cliente.id})}">
                            <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
                            Transacciones
                        </a>
                    </div>
                </div>
            </div>
        <br>
        <div class="row">
                <div class="col-md-6">
                        <div th:if="${fail != null}" class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <strong>Error!</strong> Intente Reralizar la tranferencia mas tarde.
                        </div>
                        <div th:if="${success != null}" class="alert alert-success alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <strong>Operacion exitosa </strong> Se a realizado una nueva transferencia.
                        </div>
                </div>
            </div>
         <div class="row">
           
            <div class="col-md-12 form-horizontal">
                
                    <br>
                    <div class="col-md-4">
                        <h3>Cuenta origen</h3>
                        <div class="form-group form-group-md">
                            <label class="col-sm-4 control-label" for="rut">Rut:</label>
                            <div class="col-sm-8">
                                <input class="form-control" type="text" th:field="*{cliente.rut}" id="rut" disabled="true"/>
                            </div>
                        </div>
                        <div class="form-group form-group-md">
                            <label class="col-sm-4 control-label" for="nombre">Nombre:</label>
                            <div class="col-sm-8">
                                <input class="form-control" type="text" th:field="${cliente.nombre}" id="nombre" disabled="true"/>
                            </div>
                        </div>
                        <div class="form-group form-group-md">
                            <label class="col-sm-4 control-label" for="apellido">Apellido:</label>
                            <div class="col-sm-8">
                                <input class="form-control" type="text" th:field="${cliente.apellidoPaterno}" id="apellido" disabled="true"/>
                            </div>
                        </div>
                        <div class="form-group form-group-md">
                                <label class="col-sm-4 control-label" for="email">Email:</label>
                                <div class="col-sm-8">
                                    <input class="form-control" type="text" th:field="${cliente.email}" id="email" disabled="true"/>
                                </div>
                        </div>
                        <div class="form-group form-group-md">
                            <label class="col-sm-4 control-label" for="ncuenta">Numero de Cuenta:</label>
                            <div class="col-sm-8">
                                <input class="form-control" type="text" th:field="${cliente.cuenta.id}" id="ncuenta" disabled="true"/>
                            </div>
                        </div>
                        <div class="row">
                                <table class="table">
                                    <tbody>
                                        <tr th:each="producto, itemStat : ${cliente.cuenta.productos}">
                                            <td th:if="${producto.tipodeproducto.id == 2}">Tarjeta de debito</td>
                                            <td th:if="${producto.tipodeproducto.id == 2}">Monto: </td>
                                            <td th:if="${producto.tipodeproducto.id == 2}" th:text="${producto.saldo}"></td>
                                            <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                            <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                            <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                            <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                            <td th:if="${producto.tipodeproducto.id == 2}"> Total: </td>
                                            <td th:if="${producto.tipodeproducto.id == 2}" th:text="${producto.saldo}"></td>
                                        </tr>
                                        <tr th:each="producto, itemStat : ${cliente.cuenta.productos}">
                                            <td th:if="${producto.tipodeproducto.id == 3}">Linea de credito</td>
                                            <td th:if="${producto.tipodeproducto.id == 3}">Monto:</td>
                                            <td th:if="${producto.tipodeproducto.id == 3}" th:text="${producto.saldo}"></td>
                                            <td th:if="${producto.tipodeproducto.id == 3}"> </td>
                                            <td th:if="${producto.tipodeproducto.id == 3}">Monto Utilizado:</td>
                                            <td th:if="${producto.tipodeproducto.id == 3}" th:text="${producto.saldoBase}"></td>
                                            <td th:if="${producto.tipodeproducto.id == 3}"> </td>
                                            <td th:if="${producto.tipodeproducto.id == 3}"> Total: </td>
                                            <td th:if="${producto.tipodeproducto.id == 3}" th:text="${producto.saldo - producto.saldoBase}"></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>total contable:</td>
                                            <td th:text="${totalContable}"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                    </div>
                <form action="#" th:action="@{/cliente/trans}" th:object="${transferencia}" method="POST">     
                    <div class="col-md-8">
                       
                            <h3>Cuenta destino</h3>
                            <div class="form-group form-group-md">
                                <label class="col-sm-4 control-label" for="cuenta-destino">Cuenta destino:</label>
                                <input type="hidden" th:field="*{cuentaOrigen}" th:value="${cliente}">
                                <div class="col-sm-8">
                                    <select class="form-control"  th:field="*{cuentaDestino}" required>
                                        <option value="">Seleccione...</option> 
                                        <option th:each="cliente : ${cuentas}" th:value="${cliente.id}" th:text="${'Rut: ' + cliente.rut + '- Nombre:  ' + cliente.nombre + '- N°cuenta:' + cliente.cuenta.id}"></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group form-group-md">
                                <label class="col-sm-4 control-label" for="monto">Monto a tranferir:</label>
                                <div class="col-sm-2">
                                    <div class="input-group">
                                        <span class="input-group-addon">$</span>
                                        <input class="form-control" type="number" th:field="*{monto}" id="monto" maxlength="10" required  />
                                    </div>
                                </div>
                            </div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 pull-right">
                            <a th:href="@{/cliente/{id}(id=${cliente.id})}" class="btn  btn-default">Cancelar</a>
                            <button type="submit" class="btn btn-success">Transferir</button>
                        </div>
                    </div>
                </form> 
               
            </div>
        </div> 

        <!-- <div class="row">
                <div class="col-md-12 form-horizontal">
                    <h3>Cuenta</h3>
                    <br>
                    <div class="col-md-4">
                            <div class="form-group form-group-md">
                                    <label class="col-sm-4 control-label" for="ncuenta">Numero de Cuenta:</label>
                                    <div class="col-sm-8">
                                        <input class="form-control" type="text" th:field="${cliente.cuenta.id}" id="ncuenta" disabled="true"/>
                                    </div>
                            </div>
                    </div>
                    <br>
                    <div class="row">
                        <table class="table">
                            <tbody>
                                <tr th:each="producto, itemStat : ${cliente.cuenta.productos}">
                                    <td th:if="${producto.tipodeproducto.id == 2}">Tarjeta de debito</td>
                                    <td th:if="${producto.tipodeproducto.id == 2}">Monto: </td>
                                    <td th:if="${producto.tipodeproducto.id == 2}" th:text="${producto.saldo}"></td>
                                    <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 2}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 2}"> Total: </td>
                                    <td th:if="${producto.tipodeproducto.id == 2}" th:text="${producto.saldo}"></td>
                                </tr>
                                <tr th:each="producto, itemStat : ${cliente.cuenta.productos}">
                                    <td th:if="${producto.tipodeproducto.id == 3}">Linea de credito</td>
                                    <td th:if="${producto.tipodeproducto.id == 3}">Monto:</td>
                                    <td th:if="${producto.tipodeproducto.id == 3}" th:text="${producto.saldo}"></td>
                                    <td th:if="${producto.tipodeproducto.id == 3}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 3}">Monto Utilizado:</td>
                                    <td th:if="${producto.tipodeproducto.id == 3}" th:text="${producto.saldoBase}"></td>
                                    <td th:if="${producto.tipodeproducto.id == 3}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 3}"> Total: </td>
                                    <td th:if="${producto.tipodeproducto.id == 3}" th:text="${producto.saldo - producto.saldoBase}"></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>total contable:</td>
                                    <td th:text="${totalContable}"></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr th:each="producto, itemStat : ${cliente.cuenta.productos}">
                                    <td th:if="${producto.tipodeproducto.id == 1}">Tarjeta de credito</td>
                                    <td th:if="${producto.tipodeproducto.id == 1}">Monto: </td>
                                    <td th:if="${producto.tipodeproducto.id == 1}" th:text="${producto.saldo}"></td>
                                    <td th:if="${producto.tipodeproducto.id == 1}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 1}">Monto Utilizado:</td>
                                    <td th:if="${producto.tipodeproducto.id == 1}" th:text="${producto.saldoBase}"></td>
                                    <td th:if="${producto.tipodeproducto.id == 1}"> </td>
                                    <td th:if="${producto.tipodeproducto.id == 1}"> Total: </td>
                                    <td th:if="${producto.tipodeproducto.id == 1}" th:text="${producto.saldo - producto.saldoBase}"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <br>
                </div>
            </div> -->

        <!-- <div class="panel panel-default">
			<div class="panel-heading"></div>
			<table class="table">
				<thead>
					<tr>
						<th>Rut</th>
						<th>Nombre</th>
						<th>Apellido</th>
						<th>Email</th>
						<th>Ciudad</th>
						<th>N° Cuenta</th>
						<th>Tipo Cuenta</th>
						<th>Actions</th>
						
					</tr>
				</thead>
				<tbody>
					<tr th:each="cliente : ${clientes}">
						<td  th:text="${cliente.rut}"></td>
						<td  th:text="${cliente.nombre}"></td>
						<td  th:text="${cliente.apellidoPaterno}"></td>
						<td  th:text="${cliente.email}"></td>
						<td  th:text="${cliente.ciudad}"></td>
						<td  th:text="${cliente.cuenta.id}"></td>
						<td  th:text="${cliente.cuenta.tipo_cuenta}"></td>
						<td>
							<a th:href="@{/banco/cliente/editar/{id}(id=${cliente.id})}" type="button" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
						
							<button data-toggle="modal" data-target="#modal-warning" th:attr="data-target='#modal-warning'+${cliente.id }" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
						</td>
						
						<div class="modal modal-warning fade in" th:id="modal-warning+${cliente.id }" >
							<div class="modal-dialog">
								<div class="modal-content alert alert-danger">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">×</span>
										</button>
										<h5 class="modal-title">Borrar Cliente</h5>
									</div>
									<div class="modal-body">
										<h3>Esta seguro que desea borrar este cliente</h3>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default pull-left"
											data-dismiss="modal">Cerrar</button>
										<a type="button" class="btn btn-success"
											th:href="@{/banco/cliente/eliminar/{id}(id=${cliente.id})}"><i
											class="fa fa-check"></i>&nbsp;Si</a>
									</div>
								</div>
							</div>
					</tr>
				</tbody>
			</table>
		</div> -->
    </div>

    </div>

</body>

</html>